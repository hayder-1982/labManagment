<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªÙ‚Ø±ÙŠØ± Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ© - {{ patient.full_name }}</title>
<style>
body {
    font-family: "Times New Roman", Times, serif;
    direction: rtl;
    color: #000;
    background: #fff;
    margin: 0;
    padding: 0;
    font-size: 13px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 6px;
    text-align: center;
    font-size: 13px;
    border: none; /* Ø¨Ø¯ÙˆÙ† Ø­Ø¯ÙˆØ¯ */
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© */
.group-header { 
    font-family: "Times New Roman", Times, serif; /* Ø®Ø· Ø³Ù…ÙŠÙƒ ÙˆÙ…Ù„ÙØª */
    font-weight: bold;                               /* Ø¹Ø±ÙŠØ¶ */
    font-size: 16px;                                 /* Ø­Ø¬Ù… Ø£ÙƒØ¨Ø± Ù„Ù„Ù†Øµ */
    text-align: right;                               /* Ù…Ø­Ø§Ø°Ø§Ø© Ù„Ù„ÙŠÙ…ÙŠÙ† */
    background-color: #b4dece;                  /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©*/     /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø±Ù…Ø§Ø¯ÙŠ */
    color: #ffffff;                                  /* Ù†Øµ Ø£Ø¨ÙŠØ¶ Ù„ØªØ¨Ø§ÙŠÙ† Ø£ÙØ¶Ù„ */
    padding: 8px 12px;                               /* Ù…Ø³Ø§Ø­Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ù…Ù†Ø§Ø³Ø¨Ø© */
    border-radius: 5px;                              /* Ø­ÙˆØ§Ù Ù…Ø³ØªØ¯ÙŠØ±Ø© Ø®ÙÙŠÙØ© */
    letter-spacing: 1px;                             /* ØªØ¨Ø§Ø¹Ø¯ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ù„Ø²ÙŠØ§Ø¯Ø© ÙˆØ¶ÙˆØ­ Ø§Ù„Ù†Øµ */
    text-transform: uppercase;                       /* ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ù„Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø© */
    -webkit-print-color-adjust: exact;               /* Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆÙ† Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);           /* Ø¸Ù„ Ø®ÙÙŠÙ Ù„Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
    page-break-inside: avoid;                        /* Ø¹Ø¯Ù… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª */
}


/* Ø§Ù„Ù‡ÙŠØ¯Ø± */
.print-header {
    text-align: center;
    padding: 5px;
    border-bottom: 1px solid #000;
}
.print-header .logo {
    font-size: 18px;
    font-weight: 700;
    color: #000;
}
.print-header .lab-info {
    font-size: 11px;
    color: #000;
}
.print-header .report-title {
    font-size: 14px;
    font-weight: bold;
    color: #000;
}

/* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙŠØ¶ */
.patient-info {
    font-size: 11px;
    border: 1px solid #000;
    padding: 5px;
    margin-top: 5px;
}
.patient-info .info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3px;
}
.info-item { display: flex; gap: 4px; }

/* Ø§Ù„ÙÙˆØªØ± */
.print-footer {
    text-align: center;
    font-size: 11px;
    color: #000;
    border-top: 1px solid #000;
    padding-top: 3px;
    margin-top: 10px;
}
.signature-section {
    display: flex;
    justify-content: space-around;
    margin-top: 5px;
}
.signature-box {
    text-align: center;
    border: 1px solid #000;
    padding: 4px;
    font-size: 10px;
    width: 40%;
}
.signature-title {
    font-weight: bold;
}
.signature-line {
    border-top: 1px solid #000;
    margin-top: 10px;
    font-size: 9px;
    padding-top: 2px;
}
.container {
    max-width: 210mm;
    margin: 0 auto;
    padding: 10px;
    background: white;
}





/* Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
@media print {
    @page {
        size: A4;
        margin: 2cm 1.5cm;
    }
    thead { display: table-header-group; }
    tfoot { display: table-footer-group; }

    /* Ù…Ù†Ø¹ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª */
    .group-block { page-break-inside: avoid; break-inside: avoid; }

    /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ù„Ø§Øª ØªØªØ­ÙˆÙ„ Ù„Ø¯Ø±Ø¬Ø§Øª Ø±Ù…Ø§Ø¯ÙŠ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© */
    .status-normal { font-weight: bold; }
    .status-high { font-weight: bold; text-decoration: underline; }
    .status-low { font-weight: bold; font-style: italic; }
}
/* ØªØ£Ø«ÙŠØ± hover Ø¹Ù„Ù‰ ØµÙÙˆÙ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
</style>
<style>
/* ØªØ£Ø«ÙŠØ± striped Ù„Ù„ØµÙÙˆÙ (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ group-header) */
.table-striped tbody tr:not(.group-header):nth-of-type(odd) {
    background-color: #f9f9f9; /* Ù„ÙˆÙ† ÙØ§ØªØ­ Ù„Ù„ØµÙÙˆÙ Ø§Ù„ÙØ±Ø¯ÙŠØ© */
}

/* ØªØ£Ø«ÙŠØ± hover Ù„Ù„ØµÙÙˆÙ (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ group-header) */
.table-striped tbody tr:not(.group-header):hover {
    background-color: #f0f8ff; /* Ù„ÙˆÙ† Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ */
    cursor: pointer;
}
</style>

</head>
<body>
<div class="container">

<table class="table table-striped">
    <thead>
        <tr>
            <th colspan="6">
                <div class="print-header">
                    <div class="logo">ğŸ¥ Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø­ÙƒÙŠÙ… Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ©</div>
                    <div class="lab-info">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ÙƒØ±Ø¨Ù„Ø§Ø¡ - Ø§Ù„Ù…Ù„Ø­Ù‚ | Ø§Ù„Ù‡Ø§ØªÙ: 0096477- | Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: haderf@gmail.com</div>
                    <div class="report-title">ØªÙ‚Ø±ÙŠØ± Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ©</div>
                </div>
                <div class="patient-info">
                    <div class="info-grid">
                        <div class="info-item"><span>Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶:</span> <span>{{ patient.full_name }}</span></div>
                        <div class="info-item"><span>Ø§Ù„Ø¹Ù…Ø±:</span> <span>{{ patient.age }} Ø³Ù†Ø©</span></div>
                        <div class="info-item"><span>Ø§Ù„Ø¬Ù†Ø³:</span> <span>{{ patient.get_gender_display }}</span></div>
                        <div class="info-item"><span>Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯:</span> <span>{{ patient.barcode }}</span></div>
                        <div class="info-item"><span>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span> <span>{{ patient.phone_number }}</span></div>
                        <div class="info-item"><span>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±:</span> <span>{{ report_date|date:"Y/m/d H:i" }}</span></div>
                    </div>
                </div>
            </th>
        </tr>
        <tr style="border-bottom:1px solid #000;">
            <th dir="ltr" style="text-align: left;">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ</th>
            <th dir="ltr" style="text-align: left;">Ø§Ù„ÙˆØ­Ø¯Ø©</th>
            <th dir="ltr" style="text-align: left;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th dir="ltr" style="text-align: left;">Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
            <th dir="ltr" style="text-align: left;">Ø§Ø³Ù… Ø§Ù„ØªØ­Ù„ÙŠÙ„</th>
        </tr>
    </thead>

    {% for group_name, results in results_by_group.items %}
    <tbody class="group-block">
        <tr class="group-header">
            <td colspan="6"> {{ group_name }}</td>
        </tr>
        {% for result in results %}
        <tr>
            <td dir="ltr" style="text-align: left;" >{{ result.normal_range|linebreaksbr }}</td>
            <td dir="ltr" style="text-align: left;">{{ result.unit }}</td>
            <td dir="ltr" style="text-align: left;">
                {% if result.status == 'normal' %}

                {% elif result.status == 'high' %}
                    <span style="color: rgb(17, 17, 17);">&#9650;</span>
                {% elif result.status == 'low' %}
                    <span style="color: rgb(9, 9, 9);">&#9660;</span>
                {% endif %}
            </td>
            <td  dir="ltr" style="text-align: left;">
                <strong>{{ result.result_value }}</strong>
            </td>
            <td  dir="ltr" style="text-align: left;">{{ result.test_name }}</td>
        </tr>
        {% endfor %}
    </tbody>
    {% endfor %}

    <tfoot>
        <tr>
            <td colspan="6">
                <div class="signature-section">
                    <div class="signature-box">
                        <div class="signature-title">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø®ØªØµ</div>
                        <div class="signature-line">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ù„Ø®ØªÙ…</div>
                    </div>
                    <div class="signature-box">
                        <div class="signature-title">ØªÙˆÙ‚ÙŠØ¹ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø®ØªØ¨Ø±</div>
                        <div class="signature-line">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ù„Ø®ØªÙ…</div>
                    </div>
                </div>
                <div class="print-footer">
                     ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ØªØ§Ø±ÙŠØ®: {{ report_date|date:"Y/m/d H:i" }}
                </div>
            </td>
        </tr>
    </tfoot>
</table>

</div>
</body>
</html>
